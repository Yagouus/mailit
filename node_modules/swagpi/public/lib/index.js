const handleScroll = (e) => {
	let match;
	let array = [];
	let $wrapper = $(e.currentTarget);
	$wrapper.find('.subject, .item').forEach(child => {
		let offset = $(child).offset().top;
		let id = $(child).attr('id');
		if (offset > -10 && !match) {
			match = id;
		}
	});
	if  (match) {
		selectNav(match);
	}
}

const draw = () => {
	let searchArray = [];
	for (const name in config) {
		let $subject = Subject(name, config[name]);
		let $nav = NavSubject(name, config[name]);
		searchArray = searchArray.concat(NavSubject(name, config[name], 'search'));
		$('.api').append($subject);
		$('.nav').append($nav);
	}

	let $wrapper = $('.api-wrapper');
	$wrapper.on('scroll', handleScroll);

	NavSearch(searchArray);
}

Zepto(function($) {
  	draw();
	let hash = String(window.location.hash).slice(1);
	selectNav(hash);
});

